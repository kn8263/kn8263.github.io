import{j as r}from"./jsx-runtime.BjG_zV1W.js";import{r as i}from"./index.C7o2Wufa.js";/* empty css                          */const E=({headings:l})=>{const[a,m]=i.useState(l||[]),[h,p]=i.useState("");i.useEffect(()=>{if(l&&l.length>0){m(l);return}const t=()=>{const n=document.querySelectorAll(".markdown-content h2, .markdown-content h3, .markdown-content h4, .markdown-content h5, .markdown-content h6"),s=[];return n.forEach(e=>{const d=e.textContent?.trim()||"";if(d){let{id:c}=e;if(!c){c=d.toLowerCase().replace(/[^\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+/g,"-").replace(/^-+|-+$/g,"");let f=c,u=1;for(;document.getElementById(f);)f=`${c}-${u}`,u+=1;c=f,e.id=c}const b=parseInt(e.tagName.charAt(1),10);s.push({id:c,text:d,level:b})}}),s},o=setTimeout(()=>{const n=t();m(n)},100);return()=>clearTimeout(o)},[l]),i.useEffect(()=>{if(a.length===0)return;const t={root:null,rootMargin:"-20% 0px -70% 0px",threshold:0},o=s=>{s.forEach(e=>{e.isIntersecting&&p(e.target.id)})},n=new IntersectionObserver(o,t);return a.forEach(s=>{const e=document.getElementById(s.id);e&&n.observe(e)}),()=>{n.disconnect()}},[a]);const x=t=>{const o=document.getElementById(t);if(o){const e=o.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:e,behavior:"smooth"})}};return a.length===0?null:r.jsxs("nav",{className:"table-of-contents table-of-contents-sticky",children:[r.jsx("div",{className:"table-of-contents-header",children:r.jsx("span",{className:"table-of-contents-title",children:"目次"})}),r.jsx("ul",{className:"table-of-contents-list",children:a.map(t=>r.jsx("li",{className:`table-of-contents-item table-of-contents-item-level-${t.level} ${h===t.id?"table-of-contents-item-active":""}`,children:r.jsx("a",{href:`#${t.id}`,onClick:o=>{o.preventDefault(),x(t.id)},className:"table-of-contents-link",children:t.text})},t.id))})]})};export{E as TableOfContents};
